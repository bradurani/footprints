!function(n){var t={};function e(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=n,e.c=t,e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:o})},e.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(n,t,e){"use strict";function o(n){var t=new Error(n);return t.source="ulid",t}e.r(t);var r="0123456789ABCDEFGHJKMNPQRSTVWXYZ",i=r.length,a=Math.pow(2,48)-1,u=10,s=16;function c(n){var t=Math.floor(n()*i);return t===i&&(t=i-1),r.charAt(t)}function f(n,t){if(isNaN(n))throw new Error(n+" must be a number");if(n>a)throw o("cannot encode time greater than "+a);if(n<0)throw o("time must be positive");if(!1===Number.isInteger(n))throw o("time must be an integer");for(var e=void 0,u="";t>0;t--)e=n%i,u=r.charAt(e)+u,n=(n-e)/i;return u}function p(n,t){for(var e="";n>0;n--)e=c(t)+e;return e}function l(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];t||(t="undefined"!=typeof window?window:null);var r=t&&(t.crypto||t.msCrypto);if(r)return function(){var n=new Uint8Array(1);return r.getRandomValues(n),n[0]/255};try{var i=e(1);return function(){return i.randomBytes(1).readUInt8()/255}}catch(n){}if(n){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch(n){}return function(){return Math.random()}}throw o("secure crypto unusable, insecure Math.random not allowed")}function d(n){return n||(n=l()),function(t){return isNaN(t)&&(t=Date.now()),f(t,u)+p(s,n)}}d();e.d(t,"init",function(){return b});var h=d(l(!0)),v="Footprints",y=5e3;function b(n){if(n.initialized)console.error("Footprints already initialized");else{n.initialized=!0,n.state={basePayload:{},inputQueue:n.q||[],outputQueue:[]},n.noop=function(){},n.identity=function(n){return n};var t,e,o,r,i,a,u,s,c,f,p,l,d,b,g,w,m,O,I,C,P,k,j,F=function(n){return[].slice.call(n)};!function(){if(void 0===n.options)throw v.toUpperCase()+": your snippet must set "+v+".options to the options object";!function(t){if(void 0===t.endpointUrl)throw v.toUpperCase()+": you must pass the option endpointUrl";t.intervalWait=t.intervalWait||y,t.debug=t.debug||!1,t.pageTime=(t.pageTime||new Date).toISOString(),t.successCallback=t.successCallback||n.noop,t.errorCallback=t.errorCallback||n.noop,t.uniqueIdFunc=t.uniqueIdFunc||h,t.readyCallback=t.readyCallback||n.noop,t.transformPayloadFunc=t.transformPayloadFunc||n.identity,t.pageId=t.pageId||t.uniqueIdFunc()}(n.options),n.state.basePayload.pageTime=n.options.pageTime,n.state.basePayload.pageId=n.options.pageId;var t=function(){"function"==typeof n.processQueues&&n.processQueues()};n.push=function(){n.state.inputQueue.push(F(arguments)),t()},window.setInterval(function(){t()},n.options.intervalWait)}(),t=n.state.inputQueue,e=n.state.outputQueue,o=n.state.basePayload,r=n.options.endpointUrl,i=n.options.successCallback,a=n.options.errorCallback,u=n.options.uniqueIdFunc,s=n.options.readyCallback,c=n.options.transformPayloadFunc,f=n.options.debug,p=n.processQueues=function(){l(),w()},l=function(){var n,e;for(k("processing input queue",t);n=t.shift();)e=n.shift(),d(e,n)},d=function(n,t){k("processing action ",n,t);var e=C[n];"function"==typeof e?e.apply(null,t):j("Unknown function",n)},b=function(n,t){var e,o=(e=t,JSON.parse(JSON.stringify(e)));o.eventTime=(new Date).toISOString(),o.eventId=u(),o.eventType=n,o=c(o),g(o)},g=function(n){e.push(n)},w=function(){var n;for(k("processing output queue");n=e.shift();)m(n)},m=function(n){k("sending event",n),fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(n){if(n.status>=200&&n.status<300)return n;var t=new Error(n.statusText);throw t.response=n,t}).then(O.bind(null,n)).catch(function(t){I(n,t)})},O=function(n,t){i(t),k("Event Sent",n)},I=function(n,t){g(n),a(t),j("Event Failed",t,n)},C={pageView:function(n,t){var e=Object.assign({},o,t,P());n&&(e.name=n),b("pageView",e)},user:function(n,t){var e=Object.assign({},t);"object"==typeof n?e=Object.assign(e,n):n&&(e.userId=n),C.context(e)},track:function(n,t){var e=Object.assign(o,t);n&&(e.eventName=n),b("track",e)},context:function(t){n.state.basePayload=o=Object.assign(o,t)}},P=function(){var n={};try{n.url=window.location.href,n.path=window.location.path,n.referer=document.referer,n.title=document.title}catch(n){j("could not get page props",n)}return n},k=function(){if(f){var n=F(arguments);n.unshift(v+":"),console.log.apply(this,n)}},j=function(){if(f){var n=F(arguments);n.unshift(v+":"),console.error.apply(this,n)}},function(){for(var e in C)C.hasOwnProperty(e)&&(n[e]=function(n){return function(){var e,o=F(arguments);o.unshift(n),e=o,t.push(e),p()}}(e))}(),s(),p()}}window[v]&&b(window[v])},function(n,t){}]);
//# sourceMappingURL=footprints.min.js.map